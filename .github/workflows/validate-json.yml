name: ‚úÖ V√©rification JSON

permissions:
  contents: read

on:
  push:
    paths:
      - 'data/**/*.json'
  pull_request:
    paths:
      - 'data/**/*.json'

jobs:
  validate-json:
    name: Valider tous les fichiers JSON dans /data
    runs-on: ubuntu-latest

    steps:
      - name: üì• Cloner le repo
        uses: actions/checkout@v3

      - name: üß™ Valider tous les fichiers JSON dans /data
        run: |
          echo "üîç V√©rification des fichiers JSON dans /data..."
          for file in data/*.json; do
            echo "‚úÖ V√©rification de $file..."
            python -m json.tool "$file" > /dev/null || {
              echo "‚ùå Erreur dans $file"
              exit 1
            }

          done